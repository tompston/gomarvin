{{ $go_version      := .ProjectInfo.GoVersion -}}
{{ $project_name    := .ProjectInfo.Name -}}
// Server generated by gomarvin, {{ ConvertLastCharTo .ProjectInfo.GomarvinVersion "x" }}
// Repo : https://github.com/tompston/gomarvin
// Docs : https://gomarvin.pages.dev/docs

package main

import (
	"{{$project_name}}/settings"
	"{{$project_name}}/settings/database"
	"{{$project_name}}/app"
	"fmt"

	{{- if ( eq .ProjectInfo.Framework "chi") }}
	"net/http"
	{{ end }}
)





func main() {

	address := fmt.Sprintf("localhost:%s", settings.GO_BACKEND_PORT)

	database.Connect()		// set database.DB var to hold a connection to the db

	server := app.Start()


	{{- if ( eq .ProjectInfo.Framework "gin") }}
	server.Run(address)               	// run the server
	{{- end }}

	{{- if ( eq .ProjectInfo.Framework "fiber") }}
	server.Listen(address)
	{{- end }}


	{{- if ( eq .ProjectInfo.Framework "echo") }}
	server.Logger.Fatal(server.Start(address))
	{{- end }}


	{{- if ( eq .ProjectInfo.Framework "chi") }}
	http.ListenAndServe(address, server)
	{{- end }}
	
}