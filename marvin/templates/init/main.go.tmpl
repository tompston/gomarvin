{{ $go_version      := .ProjectInfo.GoVersion -}}
{{ $project_name    := .ProjectInfo.Name -}}
// Server generated by gomarvin, {{ .ProjectInfo.GomarvinVersion}}
package main

import (
	"{{$project_name}}/router"
	"{{$project_name}}/settings"
	"fmt"
	"strconv"

	{{- if ( eq .ProjectInfo.Framework "gin") }}
	"github.com/gin-gonic/gin"
	{{ end }}

	{{- if ( eq .ProjectInfo.Framework "fiber") }}
	"github.com/gofiber/fiber/v2"
	"github.com/gofiber/fiber/v2/middleware/logger"
	"github.com/gofiber/helmet/v2"
	"github.com/gofiber/fiber/v2/middleware/cors"
	{{ end }}


	{{- if ( eq .ProjectInfo.Framework "echo") }}
	"github.com/labstack/echo/v4"
	"github.com/labstack/echo/v4/middleware"
	{{ end }}
)





{{- if ( eq .ProjectInfo.Framework "gin") }}

func main() {
	app := gin.Default() 	// create the server
	router.Endpoints(app) 	// use endpoints
	port, _ := strconv.Atoi(settings.Config("GOLANG_PORT")) 	// import the .env int
	app.Run(fmt.Sprintf("localhost:%d", port))               	// run the server
}
{{- end }}





{{- if ( eq .ProjectInfo.Framework "fiber") }}

func main() {
	app := fiber.New()    	// create the server
	app.Use(logger.New()) 	// logs the requests
	app.Use(cors.New())		// allow fetch from frontend
	app.Use(helmet.New()) 	// security headers
	router.Endpoints(app) 	// use the routes that are defiend by the Url function
	port, _ := strconv.Atoi(settings.Config("GOLANG_PORT")) // import the .env int
	app.Listen(fmt.Sprintf("localhost:%d", port))			// run the server
}
{{- end }}





{{- if ( eq .ProjectInfo.Framework "echo") }}

func main() {
	app := echo.New()				// create the server
	app.Use(middleware.Logger())	// logs the requests
	app.Use(middleware.Recover())
	app.Use(middleware.CORS())		// allow fetch from frontend
	router.Endpoints(app)			// use the routes that are defiend by the Url function

	port, _ := strconv.Atoi(settings.Config("GOLANG_PORT")) // import the .env int
	app.Logger.Fatal(app.Start(fmt.Sprintf("localhost:%d", port)))
}
{{- end }}